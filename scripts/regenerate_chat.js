const fs = require('fs');

function createRng(seed = 20260206) {
  let s = seed >>> 0;
  return function rng() {
    s = (s * 1664525 + 1013904223) >>> 0;
    return s / 4294967296;
  };
}

const rng = createRng();
const pick = (arr) => arr[Math.floor(rng() * arr.length)];

function buildCategory({ target, pools, templates, templateCap }) {
  const out = [];
  const used = new Set();
  const useCount = Array(templates.length).fill(0);
  let guard = 0;

  while (out.length < target && guard < 2000000) {
    guard += 1;
    const ti = Math.floor(rng() * templates.length);
    if (useCount[ti] >= templateCap) continue;

    const vars = {};
    for (const [k, arr] of Object.entries(pools)) {
      if (!k.startsWith('__')) vars[k] = pick(arr);
    }

    let line = templates[ti](vars).replace(/\s+/g, ' ').trim();
    if (pools.__addon1 && pools.__addon2 && rng() < 0.68) {
      line = `${line} ${pick(pools.__addon1)} ${pick(pools.__addon2)}.`;
    }

    if (line.length < 8) continue;
    if (used.has(line)) continue;

    used.add(line);
    useCount[ti] += 1;
    out.push({ text: line });
  }

  if (out.length !== target) {
    throw new Error(`failed ${out.length}/${target}`);
  }
  return out;
}

const core = {
  spot: ['문틈', '복도 끝', '천장 모서리', '창문 옆', '계단 입구', '욕실 문앞', '주방 코너', '거실 안쪽', '현관 앞', '베란다 문', '복도 중간', '신발장 옆'],
  sign: ['발소리', '긁는 소리', '숨소리', '금속음', '물방울 소리', '저주파 웅웅거림', '전자음', '마찰음', '탁 치는 소리', '한숨 같은 소리', '문 삐걱임', '가벼운 발자국'],
  mood: ['쎄하네요', '불길하네요', '서늘하네요', '이상하네요', '정적이 무겁네요', '공기가 눌리네요', '긴장감이 세네요', '시야가 답답하네요', '기척이 선명하네요', '몰입감이 과하네요'],
  close: ['맞죠?', '같아요.', '느껴집니다.', '보입니다.', '들립니다.', '아닌가요?', '확실합니다.', '수준이네요.', '계속됩니다.', '진짜네요.'],
};

function greeting() {
  const pools = {
    hello: ['입장 완료', '출석 체크', '채팅 합류', '라이브 확인', '본방 사수', '방금 도착', '입장했어요', '보고 있습니다', '채팅 왔습니다', '합류했습니다'],
    spot: core.spot,
    sign: core.sign,
    mood: core.mood,
    tail: ['오늘 판 쉽지 않겠습니다', '초반부터 밀도가 높네요', '첫 장면인데 심박 오릅니다', '안전 동선부터 보고 싶네요', '도입부터 공포가 진합니다', '프롤로그 느낌이 아닙니다', '시작 컷이 강합니다', '초반 장악력이 크네요', '집중이 바로 됩니다', '긴장선이 빨리 올라갑니다'],
    __addon1: ['채팅도 같은 포인트 보고 있습니다', '초반 분위기 체크 계속합니다', '시청자 체감도 빠르게 오르는 중입니다', '정보보다 불안이 먼저 들어옵니다', '이 구간은 공기 연출이 강합니다', '사운드 레이어가 두껍게 들립니다', '시선이 한 지점에 묶입니다', '긴장 유지선이 높게 형성됩니다', '안전 루트부터 확보해야 합니다', '공간 압박이 생각보다 큽니다'],
    __addon2: ['초반치고 강도 높네요', '첫 진입 구간 치고 셉니다', '시작 컷 단계에서 이미 무겁습니다', '도입 몰입감이 과하게 높습니다', '체감 난도가 빠르게 올라갑니다', '프레임 톤이 냉하게 고정됩니다', '노이즈 결이 거칠게 살아있습니다', '시야보다 청각이 먼저 반응합니다', '불안 신호가 끊기지 않습니다', '후퇴 판단이 자주 떠오릅니다'],
  };

  const templates = [
    (v) => `${v.hello}. 시작 화면부터 ${v.mood}`,
    (v) => `${v.hello}, ${v.spot} 쪽이 제일 먼저 거슬립니다.`,
    (v) => `막 들어왔는데 ${v.sign}이 배경음과 분리돼 들립니다.`,
    (v) => `오프닝인데도 ${v.spot} 라인 그림자가 과하게 진합니다.`,
    (v) => `첫 프레임부터 ${v.mood} ${v.tail}.`,
    (v) => `${v.hello}. 도입치고 공포 밀도 높습니다.`,
    (v) => `지금 합류했는데 ${v.spot} 밝기 톤이 미묘하게 다릅니다.`,
    (v) => `시작 10초인데 이미 ${v.tail}.`,
    (v) => `프롤로그가 아니라 본게임 분위기가 바로 옵니다.`,
    (v) => `${v.sign}이 끊기지 않아서 초반부터 신경 쓰입니다.`,
    (v) => `${v.hello}. 오늘 맵은 초반 압박이 큽니다.`,
    (v) => `${v.spot} 쪽 노이즈가 살아 있어서 더 불안합니다.`,
    (v) => `첫 컷인데 시야보다 청각이 더 위협적입니다.`,
    (v) => `시작 구간인데 공기 밀도가 다르게 느껴집니다.`,
    (v) => `${v.hello}. 카메라 가장자리 떨림이 눈에 걸립니다.`,
    (v) => `첫 장면에서 ${v.spot}이 가장 위험해 보입니다.`,
    (v) => `지금 들어왔는데 ${v.mood} 초반치고 강합니다.`,
    (v) => `도입 멘트 중에도 ${v.sign}이 계속 남아 있습니다.`,
    (v) => `${v.hello}. 시작부터 후퇴 루트를 찾게 됩니다.`,
    (v) => `오프닝 연출 같지 않고 실제 이상 신호처럼 보입니다.`,
  ];

  return buildCategory({ target: 300, pools, templates, templateCap: 40 });
}

function question() {
  const pools = {
    spot: core.spot,
    sign: core.sign,
    action: ['후퇴', '정지', '재확인', '우회', '진입 보류', '조명 재세팅', '관찰 유지', '속도 감소', '경로 변경', '역방향 이동'],
    ask: ['맞을까요?', '어떨까요?', '괜찮을까요?', '가능할까요?', '낫겠죠?', '동의해요?', '위험할까요?', '필요할까요?', '유효할까요?', '적절할까요?'],
    __addon1: ['채팅도 같은 지점에서 의문이 나옵니다', '이 구간은 정보 확인이 특히 중요합니다', '판단 실수가 나오기 쉬운 장면입니다', '사운드와 화면이 동시에 흔들립니다', '위험 신호가 끊기지 않고 이어집니다', '지금은 결정보다 확인이 우선입니다', '시청자 반응도 같은 방향으로 몰립니다', '다음 한 걸음이 분기점이 될 수 있습니다'],
    __addon2: ['진입 전에 합의가 필요해 보입니다', '후퇴 선택지도 열어두는 편이 좋습니다', '빠른 판단보다 정확한 판단이 낫습니다', '즉답보다 체크리스트가 필요합니다', '사운드 기준 재확인이 맞습니다', '동선 변경 가능성도 고려해야 합니다', '지금은 과감함보다 안정성이 우선입니다', '한 템포 늦춰도 손해가 아닙니다'],
  };

  const templates = [
    (v) => `방금 ${v.sign} 들은 사람 저뿐인가요?`,
    (v) => `${v.spot} 쪽 움직임 본 사람 있나요?`,
    (v) => `지금은 ${v.action}가 맞는 선택일까요?`,
    (v) => `문턱 넘기 전에 ${v.spot} 먼저 체크해야 하지 않나요?`,
    (v) => `화면 가장자리 흔들림이 장비 문제일 가능성 있나요?`,
    (v) => `${v.sign} 거리감이 갑자기 가까워진 거 맞죠?`,
    (v) => `이 정적 길이면 이벤트 직전 신호로 봐야 할까요?`,
    (v) => `${v.spot} 문 각도 원래 저랬나요?`,
    (v) => `지금 페이스면 점프스케어 대응 가능할까요?`,
    (v) => `채팅 기준 위험도 몇 점으로 보면 되나요?`,
    (v) => `다음 한 걸음은 ${v.action} 쪽이 낫겠죠?`,
    (v) => `${v.spot} 먼저 보는 판단, 지금도 유효한가요?`,
    (v) => `저 저주파랑 심박 비슷한 소리 겹친 거 들리나요?`,
    (v) => `진입 전에 오디오 체크 한 번 더 해야 할까요?`,
    (v) => `프레임 드랍인지 실제 흔들림인지 구분 가능해요?`,
    (v) => `채팅 다수 의견 기준으로 ${v.action}가 맞나요?`,
    (v) => `지금 바로 들어가면 리스크 큰 편인가요?`,
    (v) => `${v.sign}이 같은 위치에서 반복되는 게 이상하지 않나요?`,
    (v) => `${v.spot} 라인부터 보는 게 안전하겠죠?`,
    (v) => `이 패턴이 트리거인지 페이크인지 판단 가능할까요?`,
  ];

  return buildCategory({ target: 300, pools, templates, templateCap: 40 });
}

function horror() {
  const pools = {
    spot: core.spot,
    sign: core.sign,
    react: ['등골이 식습니다', '손끝이 차가워집니다', '심장이 내려앉네요', '호흡이 짧아집니다', '목덜미가 굳습니다', '소름이 남습니다', '어깨가 굳습니다', '시선이 고정됩니다', '숨을 참게 됩니다', '손에 힘이 들어갑니다'],
    mood: ['압박감이 큽니다', '불안이 길게 갑니다', '정적이 위협적입니다', '시선이 묶입니다', '공간이 사람을 밀어냅니다', '공기감이 날카롭습니다', '긴장이 내려가지 않습니다', '감각이 예민해집니다', '시간이 느리게 갑니다', '퇴로부터 찾게 됩니다'],
    __addon1: ['공기 무게가 점점 더 내려앉는 느낌입니다', '시야 밖 기척이 더 선명하게 들립니다', '짧은 침묵도 압박으로 변합니다', '조명이 있어도 안심이 되지 않습니다', '정면보다 주변부가 더 무섭습니다', '장면 끝나도 긴장감이 남습니다', '발걸음을 떼기 어렵게 만듭니다', '심리적으로 후퇴를 유도하는 구간입니다'],
    __addon2: ['지속 공포 강도가 높습니다', '체감 온도까지 내려갑니다', '현장 몰입감이 과도하게 큽니다', '호흡 조절이 필요할 정도입니다', '긴장선이 쉽게 내려가지 않습니다', '장면 압박이 계속 누적됩니다', '짧은 컷도 여운이 깁니다', '한 번에 지치기 쉬운 타입입니다'],
  };

  const templates = [
    (v) => `${v.spot} 쪽은 보고만 있어도 ${v.react}.`,
    (v) => `정적이 길어질수록 ${v.mood}.`,
    (v) => `${v.sign}이 가까워지는 느낌 때문에 ${v.react}.`,
    (v) => `점프스케어 없이도 공포 밀도가 높습니다.`,
    (v) => `카메라 밖 시선이 걸려서 더 무섭습니다.`,
    (v) => `불이 켜져 있어도 안전하다는 느낌이 없습니다.`,
    (v) => `${v.spot}에 초점이 잡힐 때마다 몸이 먼저 반응합니다.`,
    (v) => `여긴 시각보다 청각이 멘탈을 먼저 깎습니다.`,
    (v) => `${v.mood} 그래서 한 걸음이 더 무겁습니다.`,
    (v) => `발소리보다 침묵이 크게 들리는 구간입니다.`,
    (v) => `문턱 넘기 전인데 벌써 퇴로부터 찾게 됩니다.`,
    (v) => `${v.sign} 끊김이 없어서 더 불길합니다.`,
    (v) => `잔향이 길게 남아 현실감이 깨집니다.`,
    (v) => `${v.spot} 라인만 보면 체감 온도가 떨어집니다.`,
    (v) => `설명 안 되는 불안이 일정하게 따라옵니다.`,
    (v) => `${v.react}, 이번 장면은 압박형 공포입니다.`,
    (v) => `밝기 정상인데도 화면이 계속 어둡게 느껴집니다.`,
    (v) => `뒤돌아보는 순간이 제일 무섭습니다.`,
    (v) => `이번 구간은 놀람보다 지속 공포가 강합니다.`,
    (v) => `${v.spot} 근처 공기감이 특히 차갑습니다.`,
  ];

  return buildCategory({ target: 300, pools, templates, templateCap: 40 });
}

function warning() {
  const pools = {
    spot: core.spot,
    sign: core.sign,
    action: ['멈추세요', '후퇴하세요', '속도 줄이세요', '시야부터 확보하세요', '손전등 먼저 넣으세요', '진입 보류하세요', '재확인하세요', '호흡부터 정리하세요', '각도 다시 잡으세요', '동선 바꾸세요'],
    reason: ['사각이 큽니다', '소리 방향이 바뀝니다', '반사광이 이상합니다', '프레임 밖 반응 있습니다', '진입 타이밍이 나쁩니다', '장비 확인이 먼저입니다', '패턴이 불규칙합니다', '위험 신호가 누적됐습니다', '동선과 안 맞습니다', '거리감이 급변합니다'],
    __addon1: ['안전 우선 원칙을 유지해야 합니다', '지금은 확인 절차가 먼저입니다', '판단 전에 정보부터 고정해야 합니다', '섣부른 진입은 손해가 큽니다', '채팅 경고 수위가 높은 상태입니다', '시야 확보 없이는 진행하면 안 됩니다', '발판과 조명 모두 재점검이 필요합니다', '리스크 관리가 핵심입니다'],
    __addon2: ['짧게 멈추고 재판단하세요', '후퇴 1회가 더 안전합니다', '진입 타이밍을 다시 잡아야 합니다', '속도를 반으로 줄이는 게 좋습니다', '동선을 보수적으로 바꾸세요', '지금은 생존 쪽이 정답입니다', '이 구간은 욕심을 버려야 합니다', '우선순위를 안전으로 고정하세요'],
  };

  const templates = [
    (v) => `${v.spot} 먼저 확인하고 이동하세요.`,
    (v) => `지금은 ${v.action} ${v.reason}.`,
    (v) => `${v.sign} 가까워졌습니다. ${v.action}`,
    (v) => `문 바로 열지 말고 조명 각도부터 재설정하세요.`,
    (v) => `현재 위치 위험도 높습니다. 후퇴 2걸음 권장합니다.`,
    (v) => `${v.spot} 진입은 잠시 보류가 맞습니다.`,
    (v) => `${v.reason} 지금은 탐색보다 확인 단계입니다.`,
    (v) => `${v.sign} 패턴 비정상입니다. 추적 금지하세요.`,
    (v) => `정적 길어진 직후가 가장 위험합니다.`,
    (v) => `급하게 돌지 말고 뒤쪽 먼저 체크하세요.`,
    (v) => `한 번에 깊게 들어가지 말고 절반 접근만 하세요.`,
    (v) => `${v.spot}는 각도 없이 들어가면 리스크 큽니다.`,
    (v) => `채팅 다수 경고 중입니다. ${v.action}`,
    (v) => `장비 이상 가능성 있습니다. 진입 전 점검하세요.`,
    (v) => `바닥 상태 불명입니다. 짧게 이동하세요.`,
    (v) => `${v.reason} 안전 동선으로 갈아타세요.`,
    (v) => `${v.spot} 앞 기류 흔들립니다. 즉시 정지 권장합니다.`,
    (v) => `진입보다 생존 우선입니다. 후퇴가 정답입니다.`,
    (v) => `${v.sign}이 가까울 때는 멈추고 재판단하세요.`,
    (v) => `지금 구간은 판단 미스가 나기 쉽습니다.`,
  ];

  return buildCategory({ target: 300, pools, templates, templateCap: 40 });
}

function troll() {
  const pools = {
    sub: ['귀신', '악령', '집주인 영혼', '벽 뒤 관객', '폐허 주민', '배회자', '복도 손님', '미지의 시청자', '문틈 거주자', '새벽 관람객'],
    act: ['후원 버튼 누를 듯', '구독 유지할 듯', '알림 켜고 대기할 듯', '클립 따고 있을 듯', '채팅 참여할 듯', '썸네일 저장할 듯', '밈 만들고 있을 듯', '리액션 따라할 듯', '좋아요 누를 듯', '합방 신청할 듯'],
    extra: ['오늘 리액션 폼 좋다', '이 장면은 밈 확정', '점프스케어보다 채팅이 빠르다', '공포보다 드립 밀도 높다', '예능 텐션이 공포를 이긴다', '심박이 배경음보다 크다', '클립 제목 자동 완성이다', '표정만으로 조회수 나온다', '타이밍이 너무 예능이다', '웃기면서 무섭다'],
    __addon1: ['채팅창 드립 회전율이 오늘 최고치입니다', '무서운데 웃긴 장면이 연속으로 나오네요', '리액션 타이밍이 너무 정확합니다', '이건 클립 제작자들이 좋아할 장면입니다', '오늘 방송은 밈 제조기 느낌입니다', '분위기 깨지지 않게 드립도 절묘하네요', '공포와 예능 밸런스가 희한하게 맞습니다', '시청자도 텐션이 같이 올라갑니다'],
    __addon2: ['클립각이 끊기질 않네요', '썸네일 후보가 계속 생깁니다', '채팅 반응이 폭발하는 구간입니다', '웃음 포인트가 자연스럽게 붙습니다', '과몰입 방지용 한마디가 필요합니다', '리액션 합이 계속 맞아떨어집니다', '시청 유지율 잘 나올 장면입니다', '다시 보기에서 더 웃길 타입입니다'],
  };

  const templates = [
    (v) => `${v.sub}도 ${v.act}.`,
    (v) => `방금 표정 저장 완료, ${v.extra}.`,
    (v) => `점프스케어 나오면 인사부터 하고 시작합시다.`,
    (v) => `퇴마보다 멘트가 먼저 나오는 방송이네요.`,
    (v) => `이 집은 벽지가 주연이고 사람은 게스트입니다.`,
    (v) => `${v.extra}.`,
    (v) => `${v.sub} 입장에서도 오늘은 이벤트 방송일 듯.`,
    (v) => `문 열기 전에 광고 멘트 한 줄 읽고 가죠.`,
    (v) => `합방 제안 오면 바로 수락각입니다.`,
    (v) => `겁먹은 표정 정확해서 연출 같아요.`,
    (v) => `${v.sub}도 이 타이밍에 박수 칠 듯합니다.`,
    (v) => `오늘은 인간 vs 공포가 아니라 인간 vs 심박입니다.`,
    (v) => `무서운 건 맞는데 리액션이 더 재밌네요.`,
    (v) => `오늘 채팅창이 제일 시끄러운 오브젝트입니다.`,
    (v) => `${v.sub} 팬카페 열릴 것 같은 전개네요.`,
    (v) => `소리보다 채팅 반응 속도가 더 무섭습니다.`,
    (v) => `이 텐션이면 폐허도 예능 세트장 됩니다.`,
    (v) => `${v.extra}, 진짜 클립각입니다.`,
    (v) => `귀신 놀랄까 봐 제가 대신 웃고 있습니다.`,
    (v) => `${v.sub}도 오늘은 관전 모드 확정입니다.`,
  ];

  return buildCategory({ target: 300, pools, templates, templateCap: 40 });
}

function support() {
  const pools = {
    pr: ['천천히', '차분하게', '신중하게', '호흡 맞춰서', '한 걸음씩', '기준 지키면서', '서두르지 말고', '침착하게', '리듬 유지하며', '안전 우선으로'],
    good: ['페이스 좋습니다', '판단 정확합니다', '컨트롤 안정적입니다', '관찰력 살아있습니다', '멘탈 유지 잘합니다', '속도 조절 훌륭합니다', '방향 선택 좋습니다', '위기 대응 좋습니다', '집중력 좋습니다', '실수 관리 좋습니다'],
    care: ['무리하지 마세요', '안전 우선으로 가요', '불안하면 후퇴해도 됩니다', '휴식 템포 가져도 괜찮아요', '생존 중심으로 판단해요', '급해지지 않아도 됩니다', '리스크 낮춰도 됩니다', '확인부터 하고 가요', '천천히 해도 괜찮습니다', '우리 계속 지켜볼게요'],
    __addon1: ['지금처럼만 가면 충분히 클리어 가능합니다', '차분한 플레이가 가장 큰 강점입니다', '위험 구간에서도 기준이 흔들리지 않습니다', '판단 순서가 매우 안정적입니다', '정보 수집 방식이 깔끔합니다', '생존 중심 선택이 잘 유지됩니다', '속도와 안정성 균형이 좋습니다', '채팅도 같은 방향으로 응원 중입니다'],
    __addon2: ['끝까지 이 리듬 유지해요', '중요한 장면일수록 지금 방식이 정답입니다', '실수 확률을 잘 낮추고 있습니다', '후반으로 갈수록 더 빛날 플레이입니다', '체력 관리까지 고려하면 완벽합니다', '필요하면 멈추고 다시 봐도 됩니다', '한 걸음씩 가면 충분합니다', '지금 페이스가 가장 안전합니다'],
  };

  const templates = [
    (v) => `${v.pr} 가면 됩니다. ${v.good}.`,
    (v) => `${v.care} 지금 플레이 방향 맞아요.`,
    (v) => `긴장 구간인데도 ${v.good}.`,
    (v) => `확인 후 이동 방식이 안정적이라 좋습니다.`,
    (v) => `채팅 다수 응원 중입니다. 끝까지 같이 가요.`,
    (v) => `${v.pr} 정보 모으는 플레이가 정답에 가깝습니다.`,
    (v) => `위험 구간에서도 중심 안 잃는 게 최고입니다.`,
    (v) => `${v.good} 이 페이스면 완주 가능합니다.`,
    (v) => `${v.care} 우리는 계속 옆에서 보겠습니다.`,
    (v) => `불빛 운용 좋아서 상황 파악이 쉽습니다.`,
    (v) => `판단 우선순위가 명확해서 든든합니다.`,
    (v) => `${v.pr} 가는 게 진짜 실력입니다.`,
    (v) => `공격적이지 않은 선택이 지금은 더 정확합니다.`,
    (v) => `${v.good} 흔들리지 않는 게 강점입니다.`,
    (v) => `한 걸음씩 확인하는 방식 계속 유지합시다.`,
    (v) => `${v.care} 지금 선택 충분히 좋습니다.`,
    (v) => `무서운 장면 지나도 멘탈 관리가 좋네요.`,
    (v) => `안전하게 가는 플레이가 결국 가장 강합니다.`,
    (v) => `${v.pr} 끝까지 가면 됩니다.`,
    (v) => `여기까지 온 것만으로도 이미 잘하고 있습니다.`,
  ];

  return buildCategory({ target: 300, pools, templates, templateCap: 40 });
}

function analysis() {
  const pools = {
    metric: ['소리 간격', '잔향 길이', '노이즈 분포', '노출 변화', '초점 이동량', '저주파 세기', '온도 추정치', '그림자 길이', '프레임 흔들림', '신호 지연값', '반사음 레벨', '명암 경계값'],
    note: ['정상 범위를 벗어났습니다', '변동폭이 과합니다', '동선과 맞지 않습니다', '우연 잡음으로 보기 어렵습니다', '반복 패턴이 관찰됩니다', '복합 원인 가능성이 큽니다', '기저값이 상승했습니다', '재측정이 필요합니다', '비정상 신호가 누적됐습니다', '물리적으로 설명이 어렵습니다'],
    __addon1: ['동일 조건 재측정이 필요합니다', '로그 기반으로도 재현성이 보입니다', '단일 원인 가정으로는 설명이 부족합니다', '노이즈와 이벤트 분리가 되지 않습니다', '신호 강도가 구간별로 비정상입니다', '환경 잡음보다 구조적 패턴이 큽니다', '거리 추정과 파형이 맞지 않습니다', '시간축 정렬이 무너져 있습니다'],
    __addon2: ['추가 검증 절차가 필요합니다', '관찰 기준을 보수적으로 가져가야 합니다', '위험도는 상향 판단이 타당합니다', '우연으로 넘기기 어려운 수준입니다', '즉시 재확인이 권장됩니다', '이상 신호가 누적된 상태입니다', '패턴 단절 지점이 보이지 않습니다', '모니터링 강도를 높여야 합니다'],
  };

  const templates = [
    (v) => `${v.metric} 기준으로 ${v.note}.`,
    (v) => `직전 구간 대비 ${v.metric} 변화량이 큽니다.`,
    (v) => `${v.metric} 패턴이 자연 노이즈와 다르게 반복됩니다.`,
    (v) => `오디오 이벤트와 영상 이벤트 시점이 어긋납니다.`,
    (v) => `단순 흔들림으로 설명하기 어려운 신호가 남습니다.`,
    (v) => `정적 구간에서만 ${v.metric}이 커지는 점이 핵심입니다.`,
    (v) => `${v.metric} 추세가 이동 방향과 반대로 갑니다.`,
    (v) => `프레임 단위로 이상 신호가 재현됩니다.`,
    (v) => `환경 반사음으로 보기 힘든 ${v.metric} 수치입니다.`,
    (v) => `문턱 통과 직후 ${v.metric} 급상승이 반복됩니다.`,
    (v) => `현재 데이터는 단일 원인보다 복합 원인에 가깝습니다.`,
    (v) => `소스 없는 잡음이 특정 구간에 집중됩니다.`,
    (v) => `${v.metric} 변화만 보면 고정 물체 반응이 아닙니다.`,
    (v) => `신호 세기와 거리감이 물리적으로 맞지 않습니다.`,
    (v) => `잔향 특성상 현재 수치 설명이 어렵습니다.`,
    (v) => `우연 패턴보다 의도 신호 가능성이 높아 보입니다.`,
    (v) => `${v.metric} 재측정 필요합니다. 값이 튑니다.`,
    (v) => `초점 이동 없이 ${v.metric}만 흔들리는 점이 이상합니다.`,
    (v) => `같은 위치 재진입 시 값이 달라지는 건 비정상입니다.`,
    (v) => `요약하면 현재 구간은 위험 신호 누적 상태입니다.`,
  ];

  return buildCategory({ target: 300, pools, templates, templateCap: 40 });
}

function jumpscare() {
  const pools = {
    react: ['심장 떨어질 뻔', '의자에서 튀어오름', '이어폰 벗어던질 뻔', '폰 놓칠 뻔', '숨 멎는 줄 알았음', '등이 먼저 굳음', '눈 감을 뻔', '손에 힘 들어감', '맥박 급상승', '비명 나올 뻔'],
    why: ['타이밍이 악랄함', '경고 없이 들어옴', '정적 뒤에 바로 터짐', '사운드가 너무 셈', '예상 각도를 피해 들어옴', '반응할 틈을 안 줌', '거리감 속임이 정확함', '컷 전환이 교묘함', '침묵 활용이 심함', '진입 속도가 빠름'],
    after: ['맥박이 안 내려감', '여운이 길게 남음', '소름이 계속 남음', '다시 보기 힘듦', '볼륨 높인 사람 다 당함', '후유증 강함', '손이 떨림', '진정이 안 됨', '귀가 먹먹함', '숨 고르기 필요함'],
    __addon1: ['이번 타이밍은 방어가 어려웠습니다', '정적 운영이 특히 치명적이었습니다', '사운드 선행이 공포를 키웠습니다', '예측 포인트를 정확히 비껴갔습니다', '한 박자 늦은 진입이 더 무섭게 만들었습니다', '시야 바깥 압박이 먼저 들어왔습니다', '체감 강도가 컷 길이를 넘었습니다', '심리전 이후 타격이 크게 왔습니다'],
    __addon2: ['짧게 쉬고 다시 보는 게 좋겠습니다', '볼륨 조절이 필요할 정도입니다', '지금은 진정 시간이 필요합니다', '후유증이 길게 남는 타입입니다', '클립으로도 다시 보기 쉽지 않습니다', '심박 회복에 시간이 걸립니다', '놀람 강도가 꽤 높은 구간입니다', '다음 컷 대비가 필요합니다'],
  };

  const templates = [
    (v) => `${v.react}. ${v.why}.`,
    (v) => `방금 건 반칙입니다. ${v.why}.`,
    (v) => `${v.react}, 진짜 ${v.after}.`,
    (v) => `화면 멈춘 줄 알았는데 바로 튀어나와 당했습니다.`,
    (v) => `소리 먼저 치고 그림자 따라와서 더 무서웠습니다.`,
    (v) => `이번 점프스케어는 다시 보기 금지급입니다.`,
    (v) => `정적 유지하다 한 번에 터뜨리는 방식이 셉니다.`,
    (v) => `${v.after}. 체감 공포가 두 배입니다.`,
    (v) => `${v.why}, 그래서 ${v.after}.`,
    (v) => `컷 길이 대비 놀람 강도가 과도하게 높습니다.`,
    (v) => `이번 건 리액션이 아니라 생존 본능이었습니다.`,
    (v) => `${v.react}, 아직 손에 힘이 안 풀립니다.`,
    (v) => `타이밍 읽었다고 생각했는데 완전히 빗나갔네요.`,
    (v) => `짧은 컷인데 여운이 길게 이어집니다.`,
    (v) => `이건 공포라기보다 심장 테스트에 가깝습니다.`,
    (v) => `${v.why}. 진짜 ${v.react}.`,
    (v) => `갑툭튀 진입 각이 완전히 사각이었습니다.`,
    (v) => `눈 깜빡이는 순간 들어와서 그대로 맞았습니다.`,
    (v) => `${v.react}. ${v.after}.`,
    (v) => `심리전으로 올린 뒤 마지막 한 방이 셌습니다.`,
  ];

  return buildCategory({ target: 300, pools, templates, templateCap: 40 });
}

const data = {
  chat: {
    greeting: greeting(),
    question: question(),
    horror: horror(),
    warning: warning(),
    troll: troll(),
    support: support(),
    analysis: analysis(),
    jumpscare_react: jumpscare(),
  },
};

fs.writeFileSync('chat.json', JSON.stringify(data, null, 2) + '\n', 'utf8');
for (const [k, v] of Object.entries(data.chat)) console.log(k, v.length);
